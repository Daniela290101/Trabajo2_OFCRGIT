diag(M) = NA # Elimina la diagonal (correlaciones absolutas de cada variable consigmo misma)
rownames(M) <- c("A. percepcion inmigracion",
"B. Edad",
"C. sexo")
colnames(M) <-c("(A)", "(B)","(C)")
colnames(M) <-c("(A)", "(B)","(C)")
corrplot::corrplot(M,
method = "color", # Cambia los círculos por color completo de cada cuadrante
addCoef.col = "#000390", # Color de los coeficientes
type = "upper", # Deja solo las correlaciones de arriba
tl.col = "black", # COlor letras, rojo por defecto
na.label = "-")
proc_baro2 <- proc_baro2 %>% select(Percepcion_inmigracion, edad=edad, sexo=sexo)
pacman::p_load(tidyverse, #Conjunto de paquetes, sobre todo dplyr y ggplot2
car, #Para recodificar
haven,
summarytools, #Para descriptivos
sjmisc,
psych)
Latinobarometro_2023 <- load("C:/Users/Acer/OneDrive - Universidad Alberto Hurtado/Escritorio/R studio y complementos/Trabajo2_OFCRGIT/input/Latinobarometro_2023_Esp_Rdata_v1_0.rdata")
View(Latinobarometro_2023_Esp_v1_0)
#SELECCION VARIABLES PARA ESCALA.
proc_baro2 <- Latinobarometro_2023_Esp_v1_0 %>% select(P33N.A, P33ST.B, P33N.C, P33N.D, idenpa, sexo, edad)
proc_baro2 <- proc_baro2 %>% dplyr::filter(idenpa==152)
head(proc_baro2)
#Quitamos los na (-5) de otra form
proc_baro2 <- proc_baro2 %>%
set_na(., na = c(-5)) %>%
na.omit()
proc_baro2 <- proc_baro2 %>% select(Percepcion_inmigracion, edad=edad, sexo=sexo)
#ESTIMAR CORRELACIÓN.
cor(proc_baro2)
#ALPHA DE CHROBACH.
psych::alpha(proc_baro2)
proc_baro2 <- proc_baro2 %>%
rowwise() %>%
mutate(Percepcion_inmigracion = sum(P33N.A, P33ST.B, P33N.C, P33N.D))
summary(proc_baro2$Percepcion_inmigracion)
proc_baro2 <- proc_baro2 %>% select(Percepcion_inmigracion, edad=edad, sexo=sexo)
View(proc_baro2)
reg2 <- lm(Percepcion_inmigracion~ edad, data=proc_baro2)
reg3 <- lm(cohesion_barrial ~ sexo, data=proc_baro2)
reg3 <- lm(Percepcion_inmigracion~ sexo, data=proc_baro2)
knitreg(list(reg2, reg3, reg4),
custom.model.names = c("Modelo 1",
"Modelo 2"),
custom.note = "*** p < 0.001; ** p < 0.01; * p < 0.05",
custom.coef.names = c("Intercepto",
"Edad",
"Mujer <br> <i>(Ref. Hombre)</i>"),
caption = "Percepción inmigración",
caption.above = TRUE)
#CARGAMOS NUEVOS PAQUETES#
pacman::p_load(dplyr, car, sjmisc, sjPlot, sjlabelled, stargazer, kableExtra, corrplot, texreg, ggplot2, ggpubr)
reg2 <- lm(Percepcion_inmigracion~ edad, data=proc_baro2)
reg3 <- lm(Percepcion_inmigracion~ sexo, data=proc_baro2)
knitreg(list(reg2, reg3),
custom.model.names = c("Modelo 1",
"Modelo 2"),
custom.note = "*** p < 0.001; ** p < 0.01; * p < 0.05",
custom.coef.names = c("Intercepto",
"Edad",
"Mujer <br> <i>(Ref. Hombre)</i>"),
caption = "Percepción inmigración",
caption.above = TRUE)
knitreg(list(reg2, reg3),
custom.model.names = c("Modelo 1",
"Modelo 2"),
custom.note = "*** p < 0.001; ** p < 0.01; * p < 0.05",
custom.coef.names = c("Intercepto",
"Edad",
"Mujer <br> <i>(Ref. Hombre)</i>"),
caption = "Percepción inmigración",
caption.above = TRUE)
View(reg2)
reg2 <- lm(Percepcion_inmigracion~ edad, data=proc_baro2)
reg3 <- lm(Percepcion_inmigracion~ sexo, data=proc_baro2)
knitreg(list(reg2, reg3),
custom.model.names = c("Modelo 1",
"Modelo 2"),
custom.note = "*** p < 0.001; ** p < 0.01; * p < 0.05",
custom.coef.names = c("Intercepto",
"Edad",
"Mujer <br> <i>(Ref. Hombre)</i>"),
caption = "Percepción inmigración",
caption.above = TRUE)
knitreg(list(reg2, reg3),
custom.model.names = c("Modelo 1",
"Modelo 2"),
custom.note = "*** p < 0.001; ** p < 0.01; * p < 0.05",
custom.coef.names = c("Intercepto",
"Edad",
"Mujer <br> <i>(Ref. Hombre)</i>"),
caption = "Percepción inmigración",
caption.above = TRUE)
pacman::p_load(tidyverse, #Conjunto de paquetes, sobre todo dplyr y ggplot2
car, #Para recodificar
haven,
summarytools, #Para descriptivos
sjmisc,
psych)
pacman::p_load(tidyverse, #Conjunto de paquetes, sobre todo dplyr y ggplot2
car, #Para recodificar
haven,
summarytools, #Para descriptivos
sjmisc,
psych)
Latinobarometro_2023 <- load("C:/Users/Acer/OneDrive - Universidad Alberto Hurtado/Escritorio/R studio y complementos/Trabajo2_OFCRGIT/input/Latinobarometro_2023_Esp_Rdata_v1_0.rdata")
pacman::p_load(tidyverse, #Conjunto de paquetes, sobre todo dplyr y ggplot2
car, #Para recodificar
haven,
summarytools, #Para descriptivos
sjmisc,
psych)
Latinobarometro_2023 <- load("C:/Users/Acer/OneDrive - Universidad Alberto Hurtado/Escritorio/R studio y complementos/Trabajo2_OFCRGIT/input/Latinobarometro_2023_Esp_Rdata_v1_0.rdata")
#SELECCION VARIABLES PARA ESCALA.
proc_baro2 <- Latinobarometro_2023_Esp_v1_0 %>% select(P33N.A, P33ST.B, P33N.C, P33N.D, idenpa, sexo, edad)
head(proc_baro2)
#ORDENAR CATEGORIAS.
#reordenar categorias para que todas sean intuitivas y así, no nos den valores negativos en el raw_alpha. Recordar que están reordenadas de diferentes maneras porque las preguntas no se formularon de forma neutral.
proc_baro2$P33N.A <- car::recode(proc_baro2$P33N.A, "1=3; 2=2; 3=1; 4=0")
proc_baro2$P33ST.B <- car::recode(proc_baro2$P33ST.B, "1=1; 2=2; 3=3; 4=0")
proc_baro2$P33N.C <- car::recode(proc_baro2$P33N.C, "1=1; 2=2; 3=3; 4=0")
proc_baro2$P33N.D <- car::recode(proc_baro2$P33N.D, "1=3; 2=2; 3=1; 4=0")
#Quitamos los na (-5) de otra form
proc_baro2 <- proc_baro2 %>%
set_na(., na = c(-5)) %>%
na.omit()
#ESTIMAR CORRELACIÓN.
cor(proc_baro2)
#ALPHA DE CHROBACH.
psych::alpha(proc_baro2)
#ALPHA DE CHROBACH.
psych::alpha(proc_baro2)
proc_baro2 <- proc_baro2 %>%
rowwise() %>%
mutate(Percepcion_inmigracion = sum(P33N.A, P33ST.B, P33N.C, P33N.D))
#ALPHA DE CHROBACH.
psych::alpha(proc_baro2)
proc_baro2 <- proc_baro2 %>%
rowwise() %>%
mutate(Percepcion_inmigracion = sum(P33N.A, P33ST.B, P33N.C, P33N.D))
summary(proc_baro2$Percepcion_inmigracion)
```{r}
proc_baro2 <- proc_baro2 %>%
rowwise() %>%
mutate(Percepcion_inmigracion = sum(P33N.A, P33ST.B, P33N.C, P33N.D))
summary(proc_baro2$Percepcion_inmigracion)
```{r}
proc_baro2 <- proc_baro2 %>%
rowwise() %>%
mutate(Percepcion_inmigracion = sum(P33N.A, P33ST.B, P33N.C, P33N.D))
summary(proc_baro2$Percepcion_inmigracion)
#CARGAMOS NUEVOS PAQUETES#
pacman::p_load(dplyr, sjPlot, sjlabelled, stargazer, kableExtra, corrplot, texreg, ggplot2, ggpubr)
proc_baro2 <- proc_baro2 %>% select(Percepcion_inmigracion, edad=edad, sexo=sexo)
reg2 <- lm(Percepcion_inmigracion~ edad, data=proc_baro2)
reg3 <- lm(Percepcion_inmigracion~ sexo, data=proc_baro2)
knitreg(list(reg2, reg3),
custom.model.names = c("Modelo 1",
"Modelo 2"),
custom.note = "*** p < 0.001; ** p < 0.01; * p < 0.05",
custom.coef.names = c("Intercepto",
"Edad",
"Mujer <br> <i>(Ref. Hombre)</i>"),
caption = "Percepción inmigración",
caption.above = TRUE)
proc_baro2 <- proc_baro2 %>% dplyr::filter(idenpa==152)
pacman::p_load(tidyverse, #Conjunto de paquetes, sobre todo dplyr y ggplot2
car, #Para recodificar
haven,
summarytools, #Para descriptivos
sjmisc,
psych)
Latinobarometro_2023 <- load("C:/Users/Acer/OneDrive - Universidad Alberto Hurtado/Escritorio/R studio y complementos/Trabajo2_OFCRGIT/input/Latinobarometro_2023_Esp_Rdata_v1_0.rdata")
Latinobarometro_2023 <- load("C:/Users/Acer/OneDrive - Universidad Alberto Hurtado/Escritorio/R studio y complementos/Trabajo2_OFCRGIT/input/Latinobarometro_2023_Esp_Rdata_v1_0.rdata")
#SELECCION VARIABLES PARA ESCALA.
proc_baro2 <- Latinobarometro_2023_Esp_v1_0 %>% select(P33N.A, P33ST.B, P33N.C, P33N.D, idenpa, sexo, edad)
#SELECCION VARIABLES PARA ESCALA.
proc_baro2 <- Latinobarometro_2023_Esp_v1_0 %>% select(P33N.A, P33ST.B, P33N.C, P33N.D, idenpa, sexo, edad)
proc_baro2 <- proc_baro2 %>% dplyr::filter(idenpa==152)
head(proc_baro2)
#ESTIMAR CORRELACIÓN.
cor(proc_baro2)
#ALPHA DE CHROBACH.
psych::alpha(proc_baro2)
proc_baro2 <- proc_baro2 %>%
rowwise() %>%
mutate(Percepcion_inmigracion = sum(P33N.A, P33ST.B, P33N.C, P33N.D))
summary(proc_baro2$Percepcion_inmigracion)
#CARGAMOS NUEVOS PAQUETES#
pacman::p_load(dplyr, sjPlot, sjlabelled, stargazer, kableExtra, corrplot, texreg, ggplot2, ggpubr)
proc_baro2 <- proc_baro2 %>% select(Percepcion_inmigracion, edad=edad, sexo=sexo)
reg2 <- lm(Percepcion_inmigracion~ edad, data=proc_baro2)
reg3 <- lm(Percepcion_inmigracion~ sexo, data=proc_baro2)
knitreg(list(reg2, reg3),
custom.model.names = c("Modelo 1",
"Modelo 2"),
custom.note = "*** p < 0.001; ** p < 0.01; * p < 0.05",
custom.coef.names = c("Intercepto",
"Edad",
"Mujer <br> <i>(Ref. Hombre)</i>"),
caption = "Percepción inmigración",
caption.above = TRUE)
ggeffects::ggpredict(fit04, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
ggeffects::ggpredict(fit04, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
#CARGAMOS NUEVOS PAQUETES#
pacman::p_load(dplyr, sjPlot, sjlabelled, stargazer, kableExtra, corrplot, texreg, ggplot2, ggpubr, ggputexreg, fastDummies, ggeffects)
ggeffects::ggpredict(fit04, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
ggeffects::ggpredict(Percepcion_inmigracion, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
#CARGAMOS NUEVOS PAQUETES#
pacman::p_load(dplyr, sjPlot, sjlabelled, stargazer, kableExtra, corrplot, texreg, ggplot2, ggpubr, ggputexreg, fastDummies, ggeffects)
#CARGAMOS NUEVOS PAQUETES#
pacman::p_load(dplyr, sjPlot, sjlabelled, stargazer, kableExtra, corrplot, texreg, ggplot2, ggpubr, ggputexreg, fastDummies, ggeffects)
proc_baro2 <- proc_baro2 %>% select(Percepcion_inmigracion, edad=edad, sexo=sexo)
reg2 <- lm(Percepcion_inmigracion~ edad, data=proc_baro2)
reg3 <- lm(Percepcion_inmigracion~ sexo, data=proc_baro2)
knitreg(list(reg2, reg3),
custom.model.names = c("Modelo 1",
"Modelo 2"),
custom.note = "*** p < 0.001; ** p < 0.01; * p < 0.05",
custom.coef.names = c("Intercepto",
"Edad",
"Mujer <br> <i>(Ref. Hombre)</i>"),
caption = "Percepción inmigración",
caption.above = TRUE)
ggeffects::ggpredict(Percepcion_inmigracion, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
ggeffects::ggpredict(Percepcion_inmigracion, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
pacman::p_load(tidyverse, #Conjunto de paquetes, sobre todo dplyr y ggplot2
car, #Para recodificar
haven,
summarytools, #Para descriptivos
sjmisc,
psych)
Latinobarometro_2023 <- load("C:/Users/Acer/OneDrive - Universidad Alberto Hurtado/Escritorio/R studio y complementos/Trabajo2_OFCRGIT/input/Latinobarometro_2023_Esp_Rdata_v1_0.rdata")
#SELECCION VARIABLES PARA ESCALA.
proc_baro2 <- Latinobarometro_2023_Esp_v1_0 %>% select(P33N.A, P33ST.B, P33N.C, P33N.D, idenpa, sexo, edad)
proc_baro2 <- proc_baro2 %>% dplyr::filter(idenpa==152)
#ORDENAR CATEGORIAS.
#reordenar categorias para que todas sean intuitivas y así, no nos den valores negativos en el raw_alpha. Recordar que están reordenadas de diferentes maneras porque las preguntas no se formularon de forma neutral.
proc_baro2$P33N.A <- car::recode(proc_baro2$P33N.A, "1=3; 2=2; 3=1; 4=0")
proc_baro2$P33ST.B <- car::recode(proc_baro2$P33ST.B, "1=1; 2=2; 3=3; 4=0")
proc_baro2$P33N.C <- car::recode(proc_baro2$P33N.C, "1=1; 2=2; 3=3; 4=0")
proc_baro2$P33N.D <- car::recode(proc_baro2$P33N.D, "1=3; 2=2; 3=1; 4=0")
#Quitamos los na (-5) de otra form
proc_baro2 <- proc_baro2 %>%
set_na(., na = c(-5)) %>%
na.omit()
#ESTIMAR CORRELACIÓN.
cor(proc_baro2)
#ALPHA DE CHROBACH.
psych::alpha(proc_baro2)
proc_baro2 <- proc_baro2 %>%
rowwise() %>%
mutate(Percepcion_inmigracion = sum(P33N.A, P33ST.B, P33N.C, P33N.D))
summary(proc_baro2$Percepcion_inmigracion)
#CARGAMOS NUEVOS PAQUETES#
pacman::p_load(dplyr, sjPlot, sjlabelled, stargazer, kableExtra, corrplot, texreg, ggplot2, ggpubr, ggputexreg, fastDummies, ggeffects)
proc_baro2 <- proc_baro2 %>% select(Percepcion_inmigracion, edad=edad, sexo=sexo)
reg2 <- lm(Percepcion_inmigracion~ edad, data=proc_baro2)
reg3 <- lm(Percepcion_inmigracion~ sexo, data=proc_baro2)
knitreg(list(reg2, reg3),
custom.model.names = c("Modelo 1",
"Modelo 2"),
custom.note = "*** p < 0.001; ** p < 0.01; * p < 0.05",
custom.coef.names = c("Intercepto",
"Edad",
"Mujer <br> <i>(Ref. Hombre)</i>"),
caption = "Percepción inmigración",
caption.above = TRUE)
knitreg(list(reg2, reg3),
custom.model.names = c("Modelo 1",
"Modelo 2"),
custom.note = "*** p < 0.001; ** p < 0.01; * p < 0.05",
custom.coef.names = c("Intercepto",
"Edad",
"Mujer <br> <i>(Ref. Hombre)</i>"),
caption = "Percepción inmigración",
caption.above = TRUE)
ggeffects::ggpredict(Percepcion_inmigracion, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
View(reg2)
ggeffects::ggpredict(reg2, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
ggeffects::ggpredict(reg2, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
ggeffects::ggpredict(reg3, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
ggeffects::ggpredict(reg2, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
ggeffects::ggpredict(reg2, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
reg4 <- lm(Percepcion_inmigracion ~ edad, data=proc_data)
reg4 <- lm(Percepcion_inmigracion ~ edad, data=proc_baro2)
reg5 <- lm(Percepcion_inmigracion ~ edad + sexo, data=proc_baro2)
reg1 <- lm(Percepcion_inmigracion~ edad, data=proc_baro2)
reg2 <- lm(Percepcion_inmigracion~ edad + sexo, data=proc_baro2)
knitreg(list(reg1, reg2),
custom.model.names = c("Modelo 1",
"Modelo 2",
),
custom.note = "*** p < 0.001; ** p < 0.01; * p < 0.05",
custom.coef.names = c("Intercepto",
"Edad",
"Mujer <br> <i>(Ref. Hombre)</i>"),
caption = "Percepción inmigración",
caption.above = TRUE)
knitreg(list(reg1, reg2),
custom.model.names = c("Modelo 1",
"Modelo 2"),
custom.note = "*** p < 0.001; ** p < 0.01; * p < 0.05",
custom.coef.names = c("Intercepto",
"Edad",
"Mujer <br> <i>(Ref. Hombre)</i>"),
caption = "Percepción inmigración",
caption.above = TRUE)
ggeffects::ggpredict(reg2, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
ggeffects::ggpredict(reg2, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
pacman::p_load(tidyverse, #Conjunto de paquetes, sobre todo dplyr y ggplot2
car, #Para recodificar
haven,
summarytools, #Para descriptivos
sjmisc,
psych)
#SELECCION VARIABLES PARA ESCALA.
proc_baro2 <- Latinobarometro_2023_Esp_v1_0 %>% select(P33N.A, P33ST.B, P33N.C, P33N.D, idenpa, sexo, edad)
proc_baro2 <- proc_baro2 %>% dplyr::filter(idenpa==152)
#ORDENAR CATEGORIAS.
#reordenar categorias para que todas sean intuitivas y así, no nos den valores negativos en el raw_alpha. Recordar que están reordenadas de diferentes maneras porque las preguntas no se formularon de forma neutral.
proc_baro2$P33N.A <- car::recode(proc_baro2$P33N.A, "1=3; 2=2; 3=1; 4=0")
proc_baro2$P33ST.B <- car::recode(proc_baro2$P33ST.B, "1=1; 2=2; 3=3; 4=0")
proc_baro2$P33N.C <- car::recode(proc_baro2$P33N.C, "1=1; 2=2; 3=3; 4=0")
proc_baro2$P33N.D <- car::recode(proc_baro2$P33N.D, "1=3; 2=2; 3=1; 4=0")
#Quitamos los na (-5) de otra form
proc_baro2 <- proc_baro2 %>%
set_na(., na = c(-5)) %>%
na.omit()
#ESTIMAR CORRELACIÓN.
cor(proc_baro2)
#ALPHA DE CHROBACH.
psych::alpha(proc_baro2)
#ALPHA DE CHROBACH.
psych::alpha(proc_baro2)
proc_baro2 <- proc_baro2 %>%
rowwise() %>%
mutate(Percepcion_inmigracion = sum(P33N.A, P33ST.B, P33N.C, P33N.D))
proc_baro2 <- proc_baro2 %>%
rowwise() %>%
mutate(Percepcion_inmigracion = sum(P33N.A, P33ST.B, P33N.C, P33N.D))
summary(proc_baro2$Percepcion_inmigracion)
```{r}
#CARGAMOS NUEVOS PAQUETES#
pacman::p_load(dplyr, sjPlot, sjlabelled, stargazer, kableExtra, corrplot, texreg, ggplot2, ggpubr, ggputexreg, fastDummies, ggeffects)
#CARGAMOS NUEVOS PAQUETES#
pacman::p_load(dplyr, sjPlot, sjlabelled, stargazer, kableExtra, corrplot, texreg, ggplot2, ggpubr, ggputexreg, fastDummies, ggeffects)
proc_baro2 <- proc_baro2 %>% select(Percepcion_inmigracion, edad=edad, sexo=sexo)
reg1 <- lm(Percepcion_inmigracion~ edad, data=proc_baro2)
reg2 <- lm(Percepcion_inmigracion~ edad + sexo, data=proc_baro2)
knitreg(list(reg1, reg2),
custom.model.names = c("Modelo 1",
"Modelo 2"),
custom.note = "*** p < 0.001; ** p < 0.01; * p < 0.05",
custom.coef.names = c("Intercepto",
"Edad",
"Mujer <br> <i>(Ref. Hombre)</i>"),
caption = "Percepción inmigración",
caption.above = TRUE)
ggeffects::ggpredict(reg2, terms = c("sexo")) %>%
ggplot(aes(x=x, y=predicted)) +
geom_bar(stat="identity", color="purple", fill="purple")+
geom_errorbar(aes(ymin = conf.low, ymax = conf.high), width=.1) +
labs(title="Sexo", x = "", y = "") +
theme_bw() +
scale_x_continuous(name = "",
breaks = c(0,1),
labels = c("Hombre", "Mujer"))+
scale_y_continuous(limits = c(0,16),
breaks = seq(0,16, by = 1))
