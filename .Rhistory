proc_data$percep_inmg  <- set_label(x = proc_data$percep_inmg, label = "Percepcion de inmigracion")
#volvemos a revisar.
frq(proc_data$impacto_inmg)
frq(proc_data$impacto_econom)
frq(proc_data$percep_inmg)
#Reordenamos categorias de respuesta para hacerlo mas intuitivo. No se recod todas para dejar todas las variables en una misma dirección, ya que la pregunta no está formulada neutralmente.
proc_data$P32INN <- recode(proc_data$P32INN, "1=2; 2=3; 3=2; 4=0")
#Reordenamos categorias de respuesta para hacerlo mas intuitivo. No se recod todas para dejar todas las variables en una misma dirección, ya que la pregunta no está formulada neutralmente.
proc_data$P32INN <- recode(proc_data$P32INN, "1=2; 2=3; 3=2; 4=0")
proc_data$P33N.A <- recode(proc_data$P33N.A, "1=3; 2=2; 3=1; 4=0")
#Proyecto de investigación en base a Latinobarómetro-2020.
install.packages("pacman")
install.packages("pacman")
pacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer, haven)
rm(list=ls())
options(scipen=999)
#Cargar BBDD.
#cargamos la base de datos desde internet
load("C:/Users/Acer/OneDrive - Universidad Alberto Hurtado/Escritorio/R studio y complementos/Trabajo 2_OFCR/input/Latinobarometro_2023_Esp_Rdata_v1_0.rdata")
proc_data <- Latinobarometro_2023_Esp_v1_0 %>% select(P32INN, # llegada de migrantes
P33N.A, # contribución a la economía
P33ST.B, # competir laboralmente
P33N.C, # aumento del crimen
P33N.D,# carga Estatal
sexo,# sexo
edad,# edad
idenpa) # pais
# Comprobar
names(proc_data)
proc_data <- proc_data %>% dplyr::filter(idenpa==152)
#Revisión de descriptivos de variables seleccionadas.
frq(proc_data$P32INN)
frq(proc_data$P33N.A)
frq(proc_data$P33ST.B)
frq(proc_data$P33N.C)
frq(proc_data$P33N.D)
frq(proc_data$sexo)
#eliminamos na.
proc_data$P32INN <- recode(proc_data$P32INN, "c(-5)=NA")
proc_data$P33N.A <- recode(proc_data$P33N.A, "c(-5)=NA")
proc_data$P33ST.B <- recode(proc_data$P33ST.B, "c(-5)=NA")
proc_data$P33N.C <- recode(proc_data$P33N.C, "c(-5)=NA")
proc_data$P33N.D <- recode(proc_data$P33N.D, "c(-5)=NA")
#Reordenamos categorias de respuesta para hacerlo mas intuitivo. No se recod todas para dejar todas las variables en una misma dirección, ya que la pregunta no está formulada neutralmente.
proc_data$P32INN <- recode(proc_data$P32INN, "1=2; 2=3; 3=2; 4=0")
proc_data$P33N.A <- recode(proc_data$P33N.A, "1=3; 2=2; 3=1; 4=0")
proc_data$P33N.D <- recode(proc_data$P33N.D, "1=3; 2=2; 3=1; 4=0")
#cambiamos nombre a variables y etiquetamos.
proc_data <- proc_data %>% rename("impacto_inmg"=P32INN, # impacto de la inmigración
"impacto_econom"=P33N.A, # impacto en economía
"impacto_lab"=P33ST.B, # impacto en competecia laboral
"impacto_crimen"=P33N.C, #impacto criminal
"impacto_cultural"=P33N.D)# impacto cultural
proc_data$impacto_inmg <- set_label(x = proc_data$impacto_inmg,label = "impacto: inmigracion")
get_label(proc_data$impacto_inmg)
proc_data$impacto_econom <- set_label(x = proc_data$impacto_econom,label = "impacto: economía")
get_label(proc_data$impacto_econom)
proc_data$impacto_lab <- set_label(x = proc_data$impacto_lab,label = "impacto: laboral")
get_label(proc_data$impacto_lab)
proc_data$impacto_crimen <- set_label(x = proc_data$impacto_crimen,label = "impacto: crimen")
get_label(proc_data$impacto_crimen)
proc_data$impacto_cultural <- set_label(x = proc_data$impacto_cultural,label = "impacto: cultura")
get_label(proc_data$impacto_cultural)
#creamos una variable a partir de la suma de los items
proc_data$percep_inmg <- (proc_data$impacto_inmg+proc_data$impacto_econom+proc_data$impacto_lab+proc_data$impacto_crimen+proc_data$impacto_cultural)
summary(proc_data$percep_inmg)
get_label(proc_data$percep_inmg)
#etieutamos la nueva variable.
proc_data$percep_inmg  <- set_label(x = proc_data$percep_inmg, label = "Percepcion de inmigracion")
#volvemos a revisar.
frq(proc_data$percep_inmg)
proc_data <- Latinobarometro_2023_Esp_v1_0 %>% select(P32INN, # llegada de migrantes
P33N.A, # contribución a la economía
P33ST.B, # competir laboralmente
P33N.C, # aumento del crimen
P33N.D,# carga Estatal
sexo,# sexo
edad,# edad
idenpa) # pais
# Comprobar
names(proc_data)
proc_data <- proc_data %>% dplyr::filter(idenpa==152)
#Revisión de descriptivos de variables seleccionadas.
frq(proc_data$P32INN)
frq(proc_data$P33N.A)
frq(proc_data$P33ST.B)
frq(proc_data$P33N.C)
frq(proc_data$P33N.D)
frq(proc_data$sexo)
#eliminamos na.
proc_data$P32INN <- recode(proc_data$P32INN, "c(-5)=NA")
proc_data$P33N.A <- recode(proc_data$P33N.A, "c(-5)=NA")
proc_data$P33ST.B <- recode(proc_data$P33ST.B, "c(-5)=NA")
proc_data$P33N.C <- recode(proc_data$P33N.C, "c(-5)=NA")
proc_data$P33N.D <- recode(proc_data$P33N.D, "c(-5)=NA")
#Reordenamos categorias de respuesta para hacerlo mas intuitivo. No se recod todas para dejar todas las variables en una misma dirección, ya que la pregunta no está formulada neutralmente.
proc_data$P32INN <- recode(proc_data$P32INN, "1=2; 2=3; 3=1; 4=0")
proc_data$P33N.A <- recode(proc_data$P33N.A, "1=3; 2=2; 3=1; 4=0")
proc_data$P33N.D <- recode(proc_data$P33N.D, "1=3; 2=2; 3=1; 4=0")
#cambiamos nombre a variables y etiquetamos.
proc_data <- proc_data %>% rename("impacto_inmg"=P32INN, # impacto de la inmigración
"impacto_econom"=P33N.A, # impacto en economía
"impacto_lab"=P33ST.B, # impacto en competecia laboral
"impacto_crimen"=P33N.C, #impacto criminal
"impacto_cultural"=P33N.D)# impacto cultural
proc_data$impacto_inmg <- set_label(x = proc_data$impacto_inmg,label = "impacto: inmigracion")
get_label(proc_data$impacto_inmg)
proc_data$impacto_econom <- set_label(x = proc_data$impacto_econom,label = "impacto: economía")
get_label(proc_data$impacto_econom)
proc_data$impacto_lab <- set_label(x = proc_data$impacto_lab,label = "impacto: laboral")
get_label(proc_data$impacto_lab)
proc_data$impacto_crimen <- set_label(x = proc_data$impacto_crimen,label = "impacto: crimen")
get_label(proc_data$impacto_crimen)
proc_data$impacto_cultural <- set_label(x = proc_data$impacto_cultural,label = "impacto: cultura")
get_label(proc_data$impacto_cultural)
#creamos una variable a partir de la suma de los items
proc_data$percep_inmg <- (proc_data$impacto_inmg+proc_data$impacto_econom+proc_data$impacto_lab+proc_data$impacto_crimen+proc_data$impacto_cultural)
summary(proc_data$percep_inmg)
get_label(proc_data$percep_inmg)
#etieutamos la nueva variable.
proc_data$percep_inmg  <- set_label(x = proc_data$percep_inmg, label = "Percepcion de inmigracion")
#volvemos a revisar.
frq(proc_data$percep_inmg)
proc_data$impacto_inmg <- set_labels(proc_data$impacto_inmg,
labels=c( "Ninguna"=0,
"Perjudicial"=1,
"Ni perjudica ni beneficia"=2,
"Beneficioso"=3))
proc_data$impacto_econom <- set_labels(proc_data$impacto_econom,
labels=c( "Ninguna"=0,
"Perjudicial"=1,
"Ni perjudica ni beneficia"=2,
"Beneficioso"=3))
proc_data$impacto_lab <- set_labels(proc_data$impacto_lab,
labels=c( "Ninguna"=0,
"Perjudicial"=1,
"Ni beneficioso ni perjudicial"=2,
"Beneficioso"=3))
proc_data$impacto_crimen <- set_labels(proc_data$impacto_crimen,
labels=c( "Ninguna"=0,
"Perjudicial"=1,
"Ni beneficioso ni perjudicial"=2,
"Beneficioso"=3))
proc_data$impacto_cultural <- set_labels(proc_data$impacto_cultural,
labels=c( "Ninguna"=0,
"Perjudicial"=1,
"Ni beneficioso ni perjudicial"=2,
"Beneficioso"=3))
frq(proc_data$percep_inmg)
frq(proc_data$impacto_crimen)
proc_data$impacto_crimen <- set_labels(proc_data$impacto_crimen,
labels=c( "Ninguna"=0,
"Perjudicial"=1,
"Ni beneficioso ni perjudicial"=2,
"Beneficioso"=3
"no sabe"=4))
proc_data$impacto_crimen <- set_labels(proc_data$impacto_crimen,
labels=c( "Ninguna"=0,
"Perjudicial"=1,
"Ni beneficioso ni perjudicial"=2,
"Beneficioso"=3,
"no sabe"=4))
#probamos con un item para saber si se incluye el nombre de categorias.
frq(proc_data$impacto_crimen)
#probamos con un item para saber si se incluye el nombre de categorias.
frq(proc_data$impacto_inmg)
proc_data <- Latinobarometro_2023_Esp_v1_0 %>% select(P32INN, # llegada de migrantes
P33N.A, # contribución a la economía
P33ST.B, # competir laboralmente
P33N.C, # aumento del crimen
P33N.D,# carga Estatal
sexo,# sexo
edad,# edad
idenpa) # pais
# Comprobar
names(proc_data)
proc_data <- proc_data %>% dplyr::filter(idenpa==152)
#Revisión de descriptivos de variables seleccionadas.
frq(proc_data$P32INN)
#eliminamos na.
proc_data$P32INN <- recode(proc_data$P32INN, "c(-5)=NA")
proc_data$P33N.A <- recode(proc_data$P33N.A, "c(-5)=NA")
proc_data$P33ST.B <- recode(proc_data$P33ST.B, "c(-5)=NA")
proc_data$P33N.C <- recode(proc_data$P33N.C, "c(-5)=NA")
proc_data$P33N.D <- recode(proc_data$P33N.D, "c(-5)=NA")
#Reordenamos categorias de respuesta para hacerlo mas intuitivo. No se recod todas para dejar todas las variables en una misma dirección, ya que la pregunta no está formulada neutralmente.
proc_data$P32INN <- recode(proc_data$P32INN, "1=2; 2=3; 3=1; 4=0")
proc_data$P33N.A <- recode(proc_data$P33N.A, "1=3; 2=2; 3=1; 4=0")
proc_data$P33ST.B <- recode(proc_data$P33N.D, "1=1; 2=2; 3=3; 4=0")
proc_data$P33N.C <- recode(proc_data$P33N.C, "1=1; 2=2; 3=3; 4=0")
proc_data$P33N.D <- recode(proc_data$P33N.D, "1=3; 2=2; 3=1; 4=0")
#cambiamos nombre a variables y etiquetamos.
proc_data <- proc_data %>% rename("impacto_inmg"=P32INN, # impacto de la inmigración
"impacto_econom"=P33N.A, # impacto en economía
"impacto_lab"=P33ST.B, # impacto en competecia laboral
"impacto_crimen"=P33N.C, #impacto criminal
"impacto_cultural"=P33N.D)# impacto cultural
proc_data$impacto_inmg <- set_label(x = proc_data$impacto_inmg,label = "impacto: inmigracion")
get_label(proc_data$impacto_inmg)
proc_data$impacto_econom <- set_label(x = proc_data$impacto_econom,label = "impacto: economía")
get_label(proc_data$impacto_econom)
proc_data$impacto_lab <- set_label(x = proc_data$impacto_lab,label = "impacto: laboral")
get_label(proc_data$impacto_lab)
proc_data$impacto_crimen <- set_label(x = proc_data$impacto_crimen,label = "impacto: crimen")
get_label(proc_data$impacto_crimen)
proc_data$impacto_cultural <- set_label(x = proc_data$impacto_cultural,label = "impacto: cultura")
get_label(proc_data$impacto_cultural)
proc_data$percep_inmg <- (proc_data$impacto_inmg+proc_data$impacto_econom+proc_data$impacto_lab+proc_data$impacto_crimen+proc_data$impacto_cultural)
summary(proc_data$percep_inmg)
get_label(proc_data$percep_inmg)
#etieutamos la nueva variable.
proc_data$percep_inmg  <- set_label(x = proc_data$percep_inmg, label = "Percepcion de inmigracion")
#volvemos a revisar.
frq(proc_data$percep_inmg)
proc_data$impacto_inmg <- set_labels(proc_data$impacto_inmg,
labels=c( "Ninguna"=0,
"Perjudicial"=1,
"Ni perjudica ni beneficia"=2,
"Beneficioso"=3))
proc_data$impacto_econom <- set_labels(proc_data$impacto_econom,
labels=c( "Ninguna"=0,
"Perjudicial"=1,
"Ni perjudica ni beneficia"=2,
"Beneficioso"=3))
proc_data$impacto_lab <- set_labels(proc_data$impacto_lab,
labels=c( "Ninguna"=0,
"Perjudicial"=1,
"Ni beneficioso ni perjudicial"=2,
"Beneficioso"=3))
proc_data$impacto_crimen <- set_labels(proc_data$impacto_crimen,
labels=c( "Ninguna"=0,
"Perjudicial"=1,
"Ni beneficioso ni perjudicial"=2,
"Beneficioso"=3))
proc_data$impacto_cultural <- set_labels(proc_data$impacto_cultural,
labels=c( "Ninguna"=0,
"Perjudicial"=1,
"Ni beneficioso ni perjudicial"=2,
"Beneficioso"=3))
#probamos con un item para saber si se incluye el nombre de categorias.
frq(proc_data$impacto_inmg)
frq(proc_data$impacto_crimen)
#Revisamos la variable sexo
frq(proc_data$sexo)
proc_data$sexo <- car::recode(proc_data$sexo, "1=0;2=1")
proc_data$sexo <- factor(proc_data$sexo,
labels=c( "Hombre",
"Mujer"),
levels=c(0,1))
get_label(proc_data$sexo)
proc_data$sexo <- set_label(x = proc_data$sexo,label = "Sexo")
frq(proc_data$sexo)
#Variable Edad: solo cambiamos nombre.
get_label(proc_data$edad)
proc_data$edad <- set_label(x = proc_data$edad,label = "Edad")
#Guardar base procesada.
proc_data <-as.data.frame(proc_data)
stargazer(proc_data, type="text")
save(proc_data,file = "C:/Users/Acer/OneDrive - Universidad Alberto Hurtado/Escritorio/R studio y complementos/Trabajo 2_OFCR/proc")
save(proc_data = "C:/Users/Acer/OneDrive - Universidad Alberto Hurtado/Escritorio/R studio y complementos/Trabajo 2_OFCR/proc")
save(proc_data, file = "C:/Users/Acer/OneDrive - Universidad Alberto Hurtado/Escritorio/R studio y complementos/Trabajo 2_OFCR/proc")
save(proc_data, file = "C:/Users/Acer/OneDrive - Universidad Alberto Hurtado/Escritorio/R studio y complementos/Trabajo 2_OFCR")
save(proc_data, file = "C:/Users/Acer/OneDrive - Universidad Alberto Hurtado/Escritorio/R studio y complementos/Trabajo 2_OFCR/proc/Latinobarometro_2023")
#HERRAMIENTAS PARA EL ANÁLISIS.
proc_data %>% dplyr::group_by(sexo) %>% summarise(mean(percep_inmg, na.rm=TRUE))
#HERRAMIENTAS PARA EL ANÁLISIS.
proc_data %>% dplyr::group_by(percep_inmg) %>% summarise(mean(sexo, na.rm=TRUE))
#HERRAMIENTAS PARA EL ANÁLISIS.
proc_data %>% dplyr::group_by(sexo) %>% summarise(mean(percep_inmg, na.rm=TRUE))
library(sjPlot)
sjt.xtab(proc_data$educacion, proc_data$conf_inst, encoding = "UTF-8")
sjt.xtab(proc_data$sexo, proc_data$percep_inmg, encoding = "UTF-8")
#Representaciones en gráficos.
#Se eliminan los na primero.
sum(is.na(proc_data))
proc_data <-na.omit(proc_data)
dim(proc_data)
proc_data <-sjlabelled::copy_labels(proc_data,proc_data_original)
#Representaciones en gráficos.
#nuevos paquetes.
pacman::p_load(sjlabelled,
dplyr, #Manipulacion de datos
stargazer, #Tablas
sjmisc, # Tablas
summarytools, # Tablas
kableExtra, #Tablas
sjPlot, #Tablas y gráficos
corrplot, # Correlaciones
sessioninfo, # Información de la sesión de trabajo
ggplot2) # Para la mayoría de los gráficos
#Se eliminan los na primero.
sum(is.na(proc_data))
#Se eliminan los na primero.
sum(is.na(proc_data))
proc_data <-na.omit(proc_data)
dim(proc_data)
proc_data <-sjlabelled::copy_labels(proc_data,proc_data_original)
#visualización.
view(dfSummary(proc_data, headings=FALSE))
#Se eliminan los na primero.
proc_data_original <-proc_data
sum(is.na(proc_data))
proc_data <-na.omit(proc_data)
dim(proc_data)
proc_data <-sjlabelled::copy_labels(proc_data,proc_data_original)
graph1 <- proc_data %>% ggplot(aes(x = percep_inmg)) +
geom_bar(fill = "purple")+
labs(title = "Percepción sobre inmigración",
x = "Percepción de inmigracion",
y = "Frecuencia") +
theme_bw()
graph1
ggsave(graph1, file= "files/output.png")
install.packages("weatherData",repos = "http://cran.us.r-project.org")
#Proyecto de investigación en base a Latinobarómetro-2023.
pacman::p_load(sjlabelled,
dplyr, #Manipulacion de datos
stargazer, #Tablas
sjmisc, # Tablas
summarytools, # Tablas
kableExtra, #Tablas
sjPlot, #Tablas y gráficos
corrplot, # Correlaciones
sessioninfo, # Información de la sesión de trabajo
ggplot2)
rm(list=ls())
options(scipen=999)
atinobarometro_2023 <- load("C:/Users/Acer/OneDrive - Universidad Alberto Hurtado/Escritorio/R studio y complementos/Trabajo2_OFCRGIT/input/Latinobarometro_2023_Esp_Rdata_v1_0.rdata")
#Cargar BBDD.
Latinobarometro_2023 <- load("C:/Users/Acer/OneDrive - Universidad Alberto Hurtado/Escritorio/R studio y complementos/Trabajo2_OFCRGIT/input/Latinobarometro_2023_Esp_Rdata_v1_0.rdata")
proc_data <- Latinobarometro_2023_Esp_v1_0 %>% select(P32INN,
P33N.A,
P33ST.B, # competir laboralmente
P33N.C, # aumento del crimen
P33N.D,# carga Estatal
sexo,# sexo
edad,# edad
idenpa) # pais
proc_data <- proc_data %>% dplyr::filter(idenpa==152)
#recodificamos.
proc_data$P32INN <- recode(proc_data$P32INN, "c(-5)=NA")
proc_data$P33N.A <- recode(proc_data$P33N.A, "c(-5)=NA")
proc_data$P33ST.B <- recode(proc_data$P33ST.B, "c(-5)=NA")
proc_data$P33N.C <- recode(proc_data$P33N.C, "c(-5)=NA")
proc_data$P33N.D <- recode(proc_data$P33N.D, "c(-5)=NA")
#reordenar categorias.
proc_data$P32INN <- dplyr::recode(proc_data$P32INN, "1=3; 2=2; 3=1; 4=0")
#reordenar categorias.
proc_data$P32INN <- car::recode(proc_data$P32INN, "1=3; 2=2; 3=1; 4=0")
proc_data$P33N.A <- car::recode(proc_data$P33N.A, "1=3; 2=2; 3=1; 4=0")
proc_data$P33ST.B <- car::recode(proc_data$P33ST.B, "1=1; 2=2; 3=3; 4=0")
proc_data$P33N.C <- car::recode(proc_data$P33N.C, "1=1; 2=2; 3=3; 4=0")
proc_data$P33N.D <- car::recode(proc_data$P33N.D, "1=3; 2=2; 3=1; 4=0")
#etiqueta.
proc_data <- proc_data %>% rename("impacto_inmg"=P32INN,
"impacto_econom"=P33N.A,
"impacto_laboral"=P33ST.B,
"impacto_crimen"=P33N.C,
"impacto_cultural"=P33N.D)
proc_data$impacto_inmg <- set_label(x = proc_data$impacto_inmg,label = "impacto:inmigracion")
get_label(proc_data$impacto_inmg)
proc_data$impacto_econom <- set_label(x = proc_data$impacto_econom,label = "impacto:economia")
get_label(proc_data$impacto_econom)
proc_data$impacto_crimen <- set_label(x = proc_data$impacto_crimen,label = "impacto:crimen")
get_label(proc_data$impacto_crimen)
proc_data$impacto_laboral <- set_label(x = proc_data$impacto_laboral,label = "impacto:laboral")
get_label(proc_data$impacto_laboral)
proc_data$impacto_cultural <- set_label(x = proc_data$impacto_cultural,label = "impacto:Cultura")
get_label(proc_data$impacto_cultural)
#Crear variable como suma de items.
proc_data$percep_inmg <- (proc_data$impacto_inmg+proc_data$impacto_econom+proc_data$impacto_laboral+proc_data$impacto_crimen+proc_data$impacto_cultural)
View(proc_data)
proc_data <- Latinobarometro_2023_Esp_v1_0 %>% select(P32INN,
P33N.A,
P33ST.B, # competir laboralmente
P33N.C, # aumento del crimen
P33N.D,# carga Estatal
sexo,# sexo
edad,# edad
idenpa) # pais
proc_data <- proc_data %>% dplyr::filter(idenpa==152)
#recodificamos.
proc_data$P32INN <- car::recode(proc_data$P32INN, "c(-5)=NA")
proc_data$P33N.A <- car::recode(proc_data$P33N.A, "c(-5)=NA")
proc_data$P33ST.B <- car::recode(proc_data$P33ST.B, "c(-5)=NA")
proc_data$P33N.C <- car::recode(proc_data$P33N.C, "c(-5)=NA")
proc_data$P33N.D <- car::recode(proc_data$P33N.D, "c(-5)=NA")
proc_data <- Latinobarometro_2023_Esp_v1_0 %>% select(P32INN,
P33N.A,
P33ST.B, # competir laboralmente
P33N.C, # aumento del crimen
P33N.D,# carga Estatal
sexo,# sexo
edad,# edad
idenpa) # pais
proc_data <- proc_data %>% dplyr::filter(idenpa==152)
#recodificamos.
proc_data$P32INN <- car::recode(proc_data$P32INN, "c(-5)=NA")
proc_data$P33N.A <- car::recode(proc_data$P33N.A, "c(-5)=NA")
proc_data$P33ST.B <- car::recode(proc_data$P33ST.B, "c(-5)=NA")
proc_data$P33N.C <- car::recode(proc_data$P33N.C, "c(-5)=NA")
proc_data$P33N.D <- car::recode(proc_data$P33N.D, "c(-5)=NA")
#reordenar categorias.
proc_data$P32INN <- car::recode(proc_data$P32INN, "1=3; 2=2; 3=1; 4=0")
proc_data$P33N.A <- car::recode(proc_data$P33N.A, "1=3; 2=2; 3=1; 4=0")
proc_data$P33ST.B <- car::recode(proc_data$P33ST.B, "1=1; 2=2; 3=3; 4=0")
proc_data$P33N.C <- car::recode(proc_data$P33N.C, "1=1; 2=2; 3=3; 4=0")
proc_data$P33N.D <- car::recode(proc_data$P33N.D, "1=3; 2=2; 3=1; 4=0")
#etiqueta.
proc_data <- proc_data %>% rename("impacto_inmg"=P32INN,
"impacto_econom"=P33N.A,
"impacto_laboral"=P33ST.B,
"impacto_crimen"=P33N.C,
"impacto_cultural"=P33N.D)
proc_data$impacto_inmg <- set_label(x = proc_data$impacto_inmg,label = "impacto:inmigracion")
get_label(proc_data$impacto_inmg)
proc_data$impacto_econom <- set_label(x = proc_data$impacto_econom,label = "impacto:economia")
get_label(proc_data$impacto_econom)
proc_data$impacto_crimen <- set_label(x = proc_data$impacto_crimen,label = "impacto:crimen")
get_label(proc_data$impacto_crimen)
proc_data$impacto_laboral <- set_label(x = proc_data$impacto_laboral,label = "impacto:laboral")
get_label(proc_data$impacto_laboral)
proc_data$impacto_cultural <- set_label(x = proc_data$impacto_cultural,label = "impacto:Cultura")
get_label(proc_data$impacto_cultural)
#Crear variable como suma de items.
proc_data$percep_inmg <- (proc_data$impacto_inmg+proc_data$impacto_econom+proc_data$impacto_laboral+proc_data$impacto_crimen+proc_data$impacto_cultural)
summary(proc_data$percep_inmg)
#etiqueta variable nueva.
proc_data$percep_inmg  <- set_label(x = proc_data$percep_inmg, label = "percepcion de inmigracion")
#recodificación categorías.
proc_data$impacto_inmg <- set_labels(proc_data$impacto_inmg,
labels=c( "Ninguna"=0,
"perjudicial"=1,
"ni perjudica ni beneficia"=2,
"beneficioso"=3))
proc_data$impacto_econom <- set_labels(proc_data$impacto_econom,
labels=c( "Ninguna"=0,
"perjudicial"=1,
"ni perjudica ni beneficia"=2,
"beneficioso"=3))
proc_data$impacto_laboral <- set_labels(proc_data$impacto_laboral,
labels=c( "Ninguna"=0,
"perjudicial"=1,
"ni perjudica ni beneficia"=2,
"beneficioso"=3))
proc_data$impacto_crimen <- set_labels(proc_data$impacto_crimen,
labels=c( "Ninguna"=0,
"perjudicial"=1,
"ni perjudica ni beneficia"=2,
"beneficioso"=3))
proc_data$impacto_cultural <- set_labels(proc_data$impacto_cultural,
labels=c( "Ninguna"=0,
"perjudicial"=1,
"ni perjudica ni beneficia"=2,
"beneficioso"=3))
#variable sexo.
proc_data$sexo <- car::recode(proc_data$sexo, "1=0;2=1")
proc_data$sexo <- factor(proc_data$sexo,
labels=c( "Hombre",
"Mujer"),
levels=c(0,1))
get_label(proc_data$sexo)
proc_data$sexo <- set_label(x = proc_data$sexo,label = "Sexo")
frq(proc_data$sexo)
proc_data$edad <- set_label(x = proc_data$edad,label = "Edad")
proc_data %>% dplyr::group_by(sexo) %>% summarise(mean(percep_inmg, na.rm=TRUE))
library(sjPlot)
sjt.xtab(proc_data$sexo, proc_data$percep_inmg, encoding = "UTF-8")
graph1 <- proc_data %>% ggplot(aes(x = percep_inmg)) +
geom_bar(fill = "purple")+
labs(title = "Percepción sobre inmigración",
x = "Percepción de inmigracion",
y = "Frecuencia") +
theme_bw()
graph1
#Tabla de contingencia.
sjt.xtab(proc_data$percep_inmg, proc_data$sexo,
show.col.prc=TRUE,
show.summary=FALSE,
encoding = "UTF-8")
proc_data %>%
select(percep_inmg,sexo) %>%
dplyr::group_by(sexo=sjlabelled::as_label(sexo)) %>%
dplyr::summarise(Obs.=n(),Promedio=mean(percep_inmg),SD=sd(percep_inmg)) %>%
kable(., format = "markdown")
#Gráfico 2.
graph2 <- sjPlot::plot_stackfrq(dplyr::select(proc_data, impacto_inmg,
impacto_econom,
impacto_lab,
impacto_crimen,
impacto_cultural),
title = "Percpeción sobre inmigración") +
theme(legend.position="bottom")
#Gráfico 2.
graph2 <- sjPlot::plot_stackfrq(dplyr::select(proc_data, impacto_inmg,
impacto_econom,
impacto_laboral,
impacto_crimen,
impacto_cultural),
title = "Percpeción sobre inmigración") +
theme(legend.position="bottom")
graph2
#Revisamos más a fondo la dimensión Sexo.
graph3 <- proc_data %>% ggplot(aes(x = percep_inmg, fill = sexo)) +
geom_bar() +
xlab("Percepción sobre inmigración") +
ylab("Cantidad") +
labs(fill="Sexo")+
scale_fill_discrete(labels = c('Hombre','Mujer'))
graph3
datos <- proc_data %>% group_by(edad_groups, sexo) %>%
summarise(promedio = mean(percep_inmg))
